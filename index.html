<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hong Kong Salary Tax Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: #333;
            line-height: 1.6;
            padding: 15px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(to right, #1e40af, #3b82f6);
            color: white;
            padding: 20px 15px;
            text-align: center;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .content {
            display: flex;
            flex-direction: column;
            padding: 0;
        }
        
        .calculator-section {
            padding: 20px 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .info-section {
            padding: 20px 15px;
            background: #f8fafc;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #1e3a8a;
            font-size: 14px;
        }
        
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus {
            border-color: #3b82f6;
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .button-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
        }
        
        button {
            padding: 14px;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .calculate-btn {
            background: linear-gradient(to right, #dc2626, #ef4444);
        }
        
        .calculate-btn:hover, .calculate-btn:active {
            background: linear-gradient(to right, #b91c1c, #dc2626);
        }
        
        .generate-btn {
            background: linear-gradient(to right, #059669, #10b981);
        }
        
        .generate-btn:hover, .generate-btn:active {
            background: linear-gradient(to right, #047857, #059669);
        }
        
        .results {
            background: white;
            padding: 20px 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
            border-left: 4px solid #3b82f6;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .results h2 {
            color: #1e3a8a;
            margin-bottom: 15px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 1.3rem;
        }
        
        .summary-box {
            background: #f8fafc;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            border: 1px solid #e2e8f0;
        }
        
        .result-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 14px;
        }
        
        .highlight {
            font-weight: bold;
            font-size: 16px;
            color: #1e3a8a;
            background: #e0f2fe;
            border-radius: 5px;
            padding: 10px;
        }
        
        .tax-breakdown {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border: 1px solid #e2e8f0;
        }
        
        .tax-bracket {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 8px 10px;
            background: #f8fafc;
            border-radius: 5px;
            transition: background 0.3s;
            font-size: 14px;
        }
        
        .tax-bracket:hover {
            background: #e0f2fe;
        }
        
        .bracket-header {
            font-weight: bold;
            background: #1e40af;
            color: white;
        }
        
        .final-tax {
            background: linear-gradient(to right, #dc2626, #ef4444);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-top: 15px;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(220, 38, 38, 0.2);
        }
        
        .section-title {
            color: #1e3a8a;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.2rem;
        }
        
        .steps-section {
            background: white;
            padding: 20px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .step {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #e2e8f0;
        }
        
        .step:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: #1e40af;
            color: white;
            border-radius: 50%;
            margin-right: 10px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .step-title {
            font-weight: bold;
            color: #1e3a8a;
            margin-bottom: 6px;
            font-size: 16px;
        }
        
        .tax-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
            background: white;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            font-size: 14px;
        }
        
        .tax-table th, .tax-table td {
            padding: 10px 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .tax-table th {
            background: #1e40af;
            color: white;
            font-weight: bold;
            font-size: 13px;
        }
        
        .tax-table tr:last-child td {
            border-bottom: none;
        }
        
        .tax-table tr:nth-child(even) {
            background: #f8fafc;
        }
        
        .info-box {
            background: white;
            padding: 20px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .info-box ul {
            padding-left: 18px;
        }
        
        .info-box li {
            margin-bottom: 8px;
            position: relative;
            padding-left: 8px;
            font-size: 14px;
        }
        
        .info-box li:before {
            content: "â€¢";
            color: #3b82f6;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        .icon {
            font-size: 1.1em;
        }
        
        /* Tablet and larger screens */
        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
            
            .container {
                max-width: 1000px;
                border-radius: 15px;
            }
            
            header {
                padding: 25px 30px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .content {
                flex-direction: row;
            }
            
            .calculator-section {
                flex: 1;
                padding: 30px;
                border-right: 1px solid #e2e8f0;
                border-bottom: none;
            }
            
            .info-section {
                flex: 1;
                padding: 30px;
            }
            
            .button-group {
                flex-direction: row;
                gap: 15px;
            }
            
            button:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }
            
            .calculate-btn:hover {
                box-shadow: 0 5px 15px rgba(220, 38, 38, 0.3);
            }
            
            .generate-btn:hover {
                box-shadow: 0 5px 15px rgba(5, 150, 105, 0.3);
            }
            
            .results {
                padding: 25px;
            }
            
            .tax-table {
                font-size: 16px;
            }
            
            .tax-table th, .tax-table td {
                padding: 14px 16px;
            }
        }
        
        /* Small mobile devices */
        @media (max-width: 360px) {
            body {
                padding: 10px;
            }
            
            header {
                padding: 15px 10px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .calculator-section, .info-section {
                padding: 15px 10px;
            }
            
            .tax-table {
                font-size: 12px;
            }
            
            .tax-table th, .tax-table td {
                padding: 8px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Hong Kong Salary Tax Calculator by LW</h1>
            <p class="subtitle">Learn how to calculate salary tax with this interactive tool</p>
        </header>
        
        <div class="content">
            <div class="calculator-section">
                <h2 class="section-title"><span class="icon">ðŸ§®</span> Tax Calculator</h2>
                
                <div class="form-group">
                    <label for="income">Annual Income (HKD):</label>
                    <input type="number" id="income" placeholder="Enter your annual income">
                </div>
                
                <div class="form-group">
                    <label for="allowance">Tax Allowance (HKD):</label>
                    <input type="number" id="allowance" placeholder="Enter tax allowance" value="132000">
                </div>
                
                <div class="button-group">
                    <button class="generate-btn" onclick="generateRandomValues()">
                        <span class="icon">ðŸŽ²</span> Generate Random Values
                    </button>
                    <button class="calculate-btn" onclick="calculateTax()">
                        <span class="icon">ðŸ“Š</span> Calculate Tax
                    </button>
                </div>
                
                <div class="results" id="results">
                    <h2><span class="icon">ðŸ“‹</span> Calculation Results</h2>
                    
                    <div class="summary-box">
                        <div class="result-row">
                            <span>Annual Income:</span>
                            <span id="resultIncome">-</span>
                        </div>
                        <div class="result-row">
                            <span>Tax Allowance:</span>
                            <span id="resultAllowance">-</span>
                        </div>
                        <div class="result-row highlight">
                            <span>Net Chargeable Income:</span>
                            <span id="resultChargeable">-</span>
                        </div>
                    </div>
                    
                    <div class="tax-breakdown">
                        <h3>Progressive Tax Calculation:</h3>
                        <div class="tax-bracket bracket-header">
                            <span>Tax Bracket</span>
                            <span>Tax Amount</span>
                        </div>
                        <div id="taxBrackets"></div>
                        <div class="tax-bracket highlight" style="border-top: 2px solid #1e3a8a; margin-top: 15px; padding-top: 15px;">
                            <span>Total Progressive Tax:</span>
                            <span id="totalTax">-</span>
                        </div>
                    </div>
                    
                    <div class="final-tax">
                        Salary Tax Payable: <span id="finalTax">-</span>
                    </div>
                </div>
            </div>
            
            <div class="info-section">
                <h2 class="section-title"><span class="icon">ðŸ“š</span> Learning Center</h2>
                
                <div class="steps-section">
                    <h3>Steps to Calculate Salary Tax</h3>
                    
                    <div class="step">
                        <div class="step-title"><span class="step-number">1</span>Find the Net Chargeable Income</div>
                        <p>Net Chargeable Income = Annual Income - Tax Allowance</p>
                    </div>
                    
                    <div class="step">
                        <div class="step-title"><span class="step-number">2</span>Calculate the Salary Tax Based on Progressive Tax Rate</div>
                        <p>Apply the progressive tax rates to the Net Chargeable Income using the table below:</p>
                    </div>
                </div>
                
                <div class="info-box">
                    <h3>Hong Kong Progressive Tax Rates</h3>
                    <table class="tax-table">
                        <thead>
                            <tr>
                                <th>Net Chargeable Income (HKD)</th>
                                <th>Tax Rate</th>
                                <th>Tax Calculation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>First 50,000</td>
                                <td>2%</td>
                                <td>50,000 Ã— 2%</td>
                            </tr>
                            <tr>
                                <td>Next 50,000</td>
                                <td>6%</td>
                                <td>50,000 Ã— 6%</td>
                            </tr>
                            <tr>
                                <td>Next 50,000</td>
                                <td>10%</td>
                                <td>50,000 Ã— 10%</td>
                            </tr>
                            <tr>
                                <td>Next 50,000</td>
                                <td>14%</td>
                                <td>50,000 Ã— 14%</td>
                            </tr>
                            <tr>
                                <td>Remainder</td>
                                <td>17%</td>
                                <td>Remaining amount Ã— 17%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="info-box">
                    <h3>About Hong Kong Salary Tax</h3>
                    <ul>
                        <li>Hong Kong uses a progressive tax system for salary tax calculation</li>
                        <li>Tax rates range from 2% to 17% based on income brackets</li>
                        <li>Net chargeable income = Annual income - Tax allowance</li>
                        <li>Use the "Generate Random Values" button to practice with different scenarios</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        function generateRandomValues() {
            // Generate random annual income between 100,000 and 1,000,000 with last two digits as 00
            const randomIncome = Math.floor(Math.random() * (1000000 - 100000 + 1) / 100) * 100 + 100000;
            
            // Generate random allowance between 132,000 and 300,000 with last two digits as 00
            const randomAllowance = Math.floor(Math.random() * (300000 - 132000 + 1) / 100) * 100 + 50000;
            
            // Set the values in the input fields
            document.getElementById('income').value = randomIncome;
            document.getElementById('allowance').value = randomAllowance;
            
            // Show a message to the user
            alert(`Random values generated!\nAnnual Income: HK$${randomIncome.toLocaleString()}\nTax Allowance: HK$${randomAllowance.toLocaleString()}\n\nNow try calculating the tax yourself!`);
        }
        
        function calculateTax() {
            // Get input values
            const income = parseFloat(document.getElementById('income').value);
            const allowance = parseFloat(document.getElementById('allowance').value);
            
            // Validate inputs
            if (!income || income < 0) {
                alert('Please enter a valid annual income amount');
                return;
            }
            
            if (!allowance || allowance < 0) {
                alert('Please enter a valid tax allowance amount');
                return;
            }
            
            // Calculate net chargeable income
            let netChargeable = income - allowance;
            if (netChargeable < 0) netChargeable = 0;
            
            // Calculate progressive tax
            const tax = calculateProgressiveTax(netChargeable);
            
            // Display results
            displayResults(income, allowance, netChargeable, tax);
            
            // Show results section
            document.getElementById('results').style.display = 'block';
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }
        
        function calculateProgressiveTax(income) {
            if (income <= 0) {
                return { totalTax: 0, brackets: [] };
            }
            
            // Hong Kong progressive tax brackets
            const brackets = [
                { lower: 0, upper: 50000, rate: 0.02, description: "First $50,000 at 2%" },
                { lower: 50000, upper: 100000, rate: 0.06, description: "Next $50,000 at 6%" },
                { lower: 100000, upper: 150000, rate: 0.10, description: "Next $50,000 at 10%" },
                { lower: 150000, upper: 200000, rate: 0.14, description: "Next $50,000 at 14%" },
                { lower: 200000, upper: Infinity, rate: 0.17, description: "Remainder at 17%" }
            ];
            
            let totalTax = 0;
            let remainingIncome = income;
            const bracketCalculations = [];
            
            for (let i = 0; i < brackets.length; i++) {
                if (remainingIncome <= 0) break;
                
                const bracket = brackets[i];
                const bracketRange = bracket.upper - bracket.lower;
                const taxableInBracket = Math.min(remainingIncome, bracketRange);
                
                if (taxableInBracket > 0) {
                    const taxInBracket = taxableInBracket * bracket.rate;
                    totalTax += taxInBracket;
                    
                    // Custom description for partial amounts in any bracket
                    let description;
                    if (i === 0) {
                        // First bracket
                        description = `First $${taxableInBracket.toLocaleString()} at ${Math.round(bracket.rate * 100)}%`;
                    } else if (taxableInBracket < bracketRange) {
                        // Partial amount in subsequent brackets
                        description = `Next $${taxableInBracket.toLocaleString()} at ${Math.round(bracket.rate * 100)}%`;
                    } else {
                        // Full bracket amount
                        description = bracket.description;
                    }
                    
                    bracketCalculations.push({
                        description: description,
                        tax: taxInBracket
                    });
                    
                    remainingIncome -= taxableInBracket;
                }
            }
            
            return { totalTax: totalTax, brackets: bracketCalculations };
        }
        
        function displayResults(income, allowance, netChargeable, taxResult) {
            // Format currency function
            const formatMoney = (amount) => {
                return 'HK$' + amount.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            };
            
            // Display basic information
            document.getElementById('resultIncome').textContent = formatMoney(income);
            document.getElementById('resultAllowance').textContent = formatMoney(allowance);
            document.getElementById('resultChargeable').textContent = formatMoney(netChargeable);
            
            // Display tax brackets
            let bracketsHTML = '';
            
            if (taxResult.brackets.length === 0) {
                bracketsHTML = '<div class="tax-bracket">No tax - Net chargeable income is zero or negative</div>';
            } else {
                taxResult.brackets.forEach(bracket => {
                    bracketsHTML += `<div class="tax-bracket">`;
                    bracketsHTML += `<span>${bracket.description}</span>`;
                    bracketsHTML += `<span>${formatMoney(bracket.tax)}</span>`;
                    bracketsHTML += `</div>`;
                });
            }
            
            document.getElementById('taxBrackets').innerHTML = bracketsHTML;
            document.getElementById('totalTax').textContent = formatMoney(taxResult.totalTax);
            document.getElementById('finalTax').textContent = formatMoney(taxResult.totalTax);
        }
        
        // Allow pressing Enter to calculate
        document.getElementById('income').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateTax();
            }
        });
        
        document.getElementById('allowance').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateTax();
            }
        });
    </script>
</body>
</html>


